# Paket
Paket is an alternative package management tool (alternative to NuGet)

## Files
| File | Location | Modified by | Source control ? | Role |
| - | - | - | - | - |
| paket.dependencies | Solution folder | user | yes | Specify all top level dependencies for the solution (with optional version numbers) |
| paket.references | Project folders | user | yes | Specify which projects use which dependency |
| paket.lock | Solution folder | paket | yes | Generated by Paket to fix all version numbers accross the solution |

### paket.dependencies
```ps1
source https://api.nuget.org/v3/index.json
# source C:\Dev_Nuget\packages
# source "C:\Program Files (x86)\Microsoft SDKs\NuGetPackages\"

# optional
framework: net6.0

# optional
# Do not extract into the "packages" folder but use a globally shared directory
storage: none

# >= 0
nuget Newtonsoft.Json

# strict version
nuget Newtonsoft.Json = 13.0.2
nuget Newtonsoft.Json 13.0.2

nuget Example >= 1.2.3       # At least 1.2.3
nuget Example > 1.2.3        # Greater than 1.2.3
nuget Example <= 1.2.3       # Less than or equal to 1.2.3
nuget Example < 1.2.3        # Less than 1.2.3
nuget Example >= 1.2.3 < 1.5 # At least 1.2.3 but less than 1.5

# Pessimistic version constraint
# ==============================
nuget Example ~> 1.2.3

~> 0                        # 0 <= x < 1
~> 1.0                      # 1.0 <= x < 2.0
~> 1.2                      # 1.2 <= x < 2.0
~> 1.2.3                    # 1.2.3 <= x < 1.3
~> 1.2.3.4                  # 1.2.3.4 <= x < 1.2.4
~> 1.2.3-alpha001           # 1.2.3-alpha001 <= x < 1.3

~> 1.2 >= 1.2.3             # 1.2.3 <= x < 2.0

# Prereleases
# ===========
nuget Example >= 1.2.3 alpha  # At least 1.2.3 including alpha versions.
nuget Example >= 2 beta rc    # At least 2.0 including rc and beta versions.
nuget Example >= 3 rc         # At least 3.0 including rc versions.
nuget Example >= 3 prerelease # At least 3.0 including all prerelease versions.


# Transitive dependencies
# =======================
# you can also add transitive dependencies here
# if you want to fix their version

# might fail if 1.2.3 does not fit every other constraints
nuget Transitive = 1.2.3

# change conflicting constraints and pick 1.2.3 for everyone
nuget Transitive == 1.2.3
```

### paket.references
```
Newtonsoft.Json
```

## Install Paket dotnet tool
```ps1
dotnet new tool-manifest
dotnet tool install paket
dotnet tool restore

# add paket-files/ to .gitignore
```

## Convert a solution from NuGet to Paket
```ps1
# creates:
#  - paket.dependencies
#  - paket.lock
#  - [Project folders]/paket.references
#
# creates (internal):
#  - .paket/Paket.Restore.targets
#  - paket-files/paket.restore.cached
#
# in every project files, replaces nuget references with
# <Import Project="..\.paket\Paket.Restore.targets" />

dotnet paket convert-from-nuget
```

## Initialize Paket in a solution
```ps1
# creates:
#   - paket.dependencies
#   - paket-files/

dotnet paket init

# create a paket.references file in every project folder

# compute and install dependencies
dotnet paket install
```

## Use Paket
```ps1
# add CliWrap to all projects
dotnet paket add CliWrap

# add CliWrap to a specific project
dotnet paket add --project xxx.csproj CliWrap

# remove CliWrap
dotnet paket remove CliWrap

# - compute dependency graph
# - download dependencies
# - update projects
dotnet paket install

# - download computed dependency graph
dotnet paket restore

# simplify declared dependencies by removing transitive dependencies
dotnet paket simplify

# check if new versions of dependencies are available
dotnet paket outdated

# update dependencies to their latest version
# within the constraints specified
dotnet paket update
```
